{"ast":null,"code":"var _jsxFileName = \"/Users/esuweld/Desktop/Main Studies/vidly-app/src/components/rentalComponent/rentalForm.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"../common/form\";\nimport { Joi } from \"joi-browser\";\nimport { getOneRental, addRental, getMoviesDTO } from \"../services/rentalsService\";\nimport { toast } from \"react-toastify\";\n\nclass RentalForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: \"\",\n      data: {\n        movie: \"\",\n        customer: \"\",\n        dateOut: \"\",\n        dateReturned: \"\",\n        status: \"\",\n        rentalFee: \"\"\n      },\n      movies: [],\n      errors: {}\n    };\n\n    this.populateRentalForm = async () => {\n      const rentalId = this.props.match.params.id;\n      if (rentalId === \"new\") return;\n\n      try {\n        const {\n          data\n        } = await getOneRental(rentalId);\n        this.setState({\n          data\n        });\n        console.log(data);\n      } catch (ex) {\n        toast.error(ex.response.message);\n      }\n    };\n\n    this.doSubmit = async () => {\n      const data = this.state.data;\n\n      try {\n        await addRental(data);\n      } catch (ex) {\n        if (ex.response.status === 400) {\n          const {\n            errors\n          } = this.state;\n          errors.name = ex.response.message;\n        }\n      }\n\n      this.props.history.replace(\"/rentals\");\n    };\n  }\n\n  // schema = {\n  //   id: Joi.number(),\n  //   movie: Joi.number().required,\n  //   customer: Joi.number().required,\n  //   dateOut: Joi.date().required,\n  //   dateReturned: Joi.date(),\n  //   status: Joi.string().required(),\n  //   rentalFee: Joi.number(),\n  // };\n  async componentDidMount() {\n    const {\n      data: movies\n    } = await getMoviesDTO();\n    this.setState({\n      movies\n    });\n    console.log(movies);\n    await this.populateRentalForm();\n  }\n\n  render() {\n    const {\n      movies\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, \"Rental Form\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, this.renderSelect(\"movie\", \"Movie\", movies)));\n  }\n\n}\n\nexport default RentalForm;","map":{"version":3,"sources":["/Users/esuweld/Desktop/Main Studies/vidly-app/src/components/rentalComponent/rentalForm.jsx"],"names":["React","Component","Form","Joi","getOneRental","addRental","getMoviesDTO","toast","RentalForm","state","id","data","movie","customer","dateOut","dateReturned","status","rentalFee","movies","errors","populateRentalForm","rentalId","props","match","params","setState","console","log","ex","error","response","message","doSubmit","name","history","replace","componentDidMount","render","handleSubmit","renderSelect"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SAASC,GAAT,QAAoB,aAApB;AACA,SACEC,YADF,EAEEC,SAFF,EAGEC,YAHF,QAIO,4BAJP;AAKA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,MAAMC,UAAN,SAAyBN,IAAzB,CAA8B;AAAA;AAAA;AAAA,SAC5BO,KAD4B,GACpB;AACNC,MAAAA,EAAE,EAAE,EADE;AAENC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,EADH;AAEJC,QAAAA,QAAQ,EAAE,EAFN;AAGJC,QAAAA,OAAO,EAAE,EAHL;AAIJC,QAAAA,YAAY,EAAE,EAJV;AAKJC,QAAAA,MAAM,EAAE,EALJ;AAMJC,QAAAA,SAAS,EAAE;AANP,OAFA;AAUNC,MAAAA,MAAM,EAAE,EAVF;AAWNC,MAAAA,MAAM,EAAE;AAXF,KADoB;;AAAA,SAgC5BC,kBAhC4B,GAgCP,YAAY;AAC/B,YAAMC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBd,EAAzC;AACA,UAAIW,QAAQ,KAAK,KAAjB,EAAwB;;AACxB,UAAI;AACF,cAAM;AAAEV,UAAAA;AAAF,YAAW,MAAMP,YAAY,CAACiB,QAAD,CAAnC;AACA,aAAKI,QAAL,CAAc;AAAEd,UAAAA;AAAF,SAAd;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ;AACD,OAJD,CAIE,OAAOiB,EAAP,EAAW;AACXrB,QAAAA,KAAK,CAACsB,KAAN,CAAYD,EAAE,CAACE,QAAH,CAAYC,OAAxB;AACD;AACF,KA1C2B;;AAAA,SA4C5BC,QA5C4B,GA4CjB,YAAY;AACrB,YAAMrB,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAxB;;AACA,UAAI;AACF,cAAMN,SAAS,CAACM,IAAD,CAAf;AACD,OAFD,CAEE,OAAOiB,EAAP,EAAW;AACX,YAAIA,EAAE,CAACE,QAAH,CAAYd,MAAZ,KAAuB,GAA3B,EAAgC;AAC9B,gBAAM;AAAEG,YAAAA;AAAF,cAAa,KAAKV,KAAxB;AACAU,UAAAA,MAAM,CAACc,IAAP,GAAcL,EAAE,CAACE,QAAH,CAAYC,OAA1B;AACD;AACF;;AACD,WAAKT,KAAL,CAAWY,OAAX,CAAmBC,OAAnB,CAA2B,UAA3B;AACD,KAvD2B;AAAA;;AAe5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAMC,iBAAN,GAA0B;AACxB,UAAM;AAAEzB,MAAAA,IAAI,EAAEO;AAAR,QAAmB,MAAMZ,YAAY,EAA3C;AACA,SAAKmB,QAAL,CAAc;AAAEP,MAAAA;AAAF,KAAd;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAYT,MAAZ;AACA,UAAM,KAAKE,kBAAL,EAAN;AACD;;AA2BDiB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEnB,MAAAA;AAAF,QAAa,KAAKT,KAAxB;AACA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAM,MAAA,QAAQ,EAAE,KAAK6B,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,YAAL,CAAkB,OAAlB,EAA2B,OAA3B,EAAoCrB,MAApC,CADH,CAFF,CADF;AAQD;;AAnE2B;;AAsE9B,eAAeV,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"../common/form\";\nimport { Joi } from \"joi-browser\";\nimport {\n  getOneRental,\n  addRental,\n  getMoviesDTO,\n} from \"../services/rentalsService\";\nimport { toast } from \"react-toastify\";\n\nclass RentalForm extends Form {\n  state = {\n    id: \"\",\n    data: {\n      movie: \"\",\n      customer: \"\",\n      dateOut: \"\",\n      dateReturned: \"\",\n      status: \"\",\n      rentalFee: \"\",\n    },\n    movies: [],\n    errors: {},\n  };\n\n  // schema = {\n  //   id: Joi.number(),\n  //   movie: Joi.number().required,\n  //   customer: Joi.number().required,\n  //   dateOut: Joi.date().required,\n  //   dateReturned: Joi.date(),\n  //   status: Joi.string().required(),\n  //   rentalFee: Joi.number(),\n  // };\n\n  async componentDidMount() {\n    const { data: movies } = await getMoviesDTO();\n    this.setState({ movies });\n    console.log(movies);\n    await this.populateRentalForm();\n  }\n\n  populateRentalForm = async () => {\n    const rentalId = this.props.match.params.id;\n    if (rentalId === \"new\") return;\n    try {\n      const { data } = await getOneRental(rentalId);\n      this.setState({ data });\n      console.log(data);\n    } catch (ex) {\n      toast.error(ex.response.message);\n    }\n  };\n\n  doSubmit = async () => {\n    const data = this.state.data;\n    try {\n      await addRental(data);\n    } catch (ex) {\n      if (ex.response.status === 400) {\n        const { errors } = this.state;\n        errors.name = ex.response.message;\n      }\n    }\n    this.props.history.replace(\"/rentals\");\n  };\n\n  render() {\n    const { movies } = this.state;\n    return (\n      <div>\n        <h1>Rental Form</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderSelect(\"movie\", \"Movie\", movies)}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default RentalForm;\n"]},"metadata":{},"sourceType":"module"}