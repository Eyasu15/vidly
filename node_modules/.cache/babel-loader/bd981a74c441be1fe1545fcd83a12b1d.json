{"ast":null,"code":"var _jsxFileName = \"/Users/esuweld/Desktop/Main Studies/vidly-app/src/components/rentalComponent/rentalForm.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"../common/form\";\nimport { Joi } from \"joi-browser\";\nimport { getOneRental, addRental } from \"../services/rentalsService\";\nimport { toast } from \"react-toastify\";\n\nclass RentalForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: \"\",\n      data: {\n        movie: \"\",\n        customer: \"\",\n        dateOut: \"\",\n        dateReturned: \"\",\n        status: \"\",\n        rentalFee: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      id: Joi.number(),\n      movie: Joi.number().required,\n      customer: Joi.number().required,\n      dateOut: Joi.date().required,\n      dateReturned: Joi.date(),\n      status: Joi.string().required(),\n      rentalFee: Joi.number()\n    };\n\n    this.populateRentalForm = async () => {\n      const rentalId = this.props.match.prarams.id;\n      if (rentalId === \"new\") return;\n\n      try {\n        const {\n          data\n        } = await getOneRental(rentalId);\n        this.setState({\n          data\n        });\n        console.log(data);\n      } catch (ex) {\n        toast.error(ex.response.message);\n      }\n    };\n\n    this.doSubmit = async () => {\n      const data = this.state.data;\n\n      try {\n        await addRental(data);\n      } catch (ex) {\n        if (ex.response.status === 400) {\n          const {\n            errors\n          } = this.state;\n          errors.name = ex.response.message;\n        }\n      }\n\n      this.props.history.replace(\"/rentals\");\n    };\n  }\n\n  componentDidMount() {\n    this.populateRentalForm();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 12\n      }\n    }, \"Rental Form\");\n  }\n\n}\n\nexport default RentalForm;","map":{"version":3,"sources":["/Users/esuweld/Desktop/Main Studies/vidly-app/src/components/rentalComponent/rentalForm.jsx"],"names":["React","Component","Form","Joi","getOneRental","addRental","toast","RentalForm","state","id","data","movie","customer","dateOut","dateReturned","status","rentalFee","errors","schema","number","required","date","string","populateRentalForm","rentalId","props","match","prarams","setState","console","log","ex","error","response","message","doSubmit","name","history","replace","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SAASC,GAAT,QAAoB,aAApB;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,4BAAxC;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,MAAMC,UAAN,SAAyBL,IAAzB,CAA8B;AAAA;AAAA;AAAA,SAC5BM,KAD4B,GACpB;AACNC,MAAAA,EAAE,EAAE,EADE;AAENC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,EADH;AAEJC,QAAAA,QAAQ,EAAE,EAFN;AAGJC,QAAAA,OAAO,EAAE,EAHL;AAIJC,QAAAA,YAAY,EAAE,EAJV;AAKJC,QAAAA,MAAM,EAAE,EALJ;AAMJC,QAAAA,SAAS,EAAE;AANP,OAFA;AAUNC,MAAAA,MAAM,EAAE;AAVF,KADoB;AAAA,SAc5BC,MAd4B,GAcnB;AACPT,MAAAA,EAAE,EAAEN,GAAG,CAACgB,MAAJ,EADG;AAEPR,MAAAA,KAAK,EAAER,GAAG,CAACgB,MAAJ,GAAaC,QAFb;AAGPR,MAAAA,QAAQ,EAAET,GAAG,CAACgB,MAAJ,GAAaC,QAHhB;AAIPP,MAAAA,OAAO,EAAEV,GAAG,CAACkB,IAAJ,GAAWD,QAJb;AAKPN,MAAAA,YAAY,EAAEX,GAAG,CAACkB,IAAJ,EALP;AAMPN,MAAAA,MAAM,EAAEZ,GAAG,CAACmB,MAAJ,GAAaF,QAAb,EAND;AAOPJ,MAAAA,SAAS,EAAEb,GAAG,CAACgB,MAAJ;AAPJ,KAdmB;;AAAA,SA4B5BI,kBA5B4B,GA4BP,YAAY;AAC/B,YAAMC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,OAAjB,CAAyBlB,EAA1C;AACA,UAAIe,QAAQ,KAAK,KAAjB,EAAwB;;AACxB,UAAI;AACF,cAAM;AAAEd,UAAAA;AAAF,YAAW,MAAMN,YAAY,CAACoB,QAAD,CAAnC;AACA,aAAKI,QAAL,CAAc;AAAElB,UAAAA;AAAF,SAAd;AACAmB,QAAAA,OAAO,CAACC,GAAR,CAAYpB,IAAZ;AACD,OAJD,CAIE,OAAOqB,EAAP,EAAW;AACXzB,QAAAA,KAAK,CAAC0B,KAAN,CAAYD,EAAE,CAACE,QAAH,CAAYC,OAAxB;AACD;AACF,KAtC2B;;AAAA,SAwC5BC,QAxC4B,GAwCjB,YAAY;AACrB,YAAMzB,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAxB;;AACA,UAAI;AACF,cAAML,SAAS,CAACK,IAAD,CAAf;AACD,OAFD,CAEE,OAAOqB,EAAP,EAAW;AACX,YAAIA,EAAE,CAACE,QAAH,CAAYlB,MAAZ,KAAuB,GAA3B,EAAgC;AAC9B,gBAAM;AAAEE,YAAAA;AAAF,cAAa,KAAKT,KAAxB;AACAS,UAAAA,MAAM,CAACmB,IAAP,GAAcL,EAAE,CAACE,QAAH,CAAYC,OAA1B;AACD;AACF;;AACD,WAAKT,KAAL,CAAWY,OAAX,CAAmBC,OAAnB,CAA2B,UAA3B;AACD,KAnD2B;AAAA;;AAwB5BC,EAAAA,iBAAiB,GAAG;AAClB,SAAKhB,kBAAL;AACD;;AA2BDiB,EAAAA,MAAM,GAAG;AACP,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAP;AACD;;AAvD2B;;AA0D9B,eAAejC,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"../common/form\";\nimport { Joi } from \"joi-browser\";\nimport { getOneRental, addRental } from \"../services/rentalsService\";\nimport { toast } from \"react-toastify\";\n\nclass RentalForm extends Form {\n  state = {\n    id: \"\",\n    data: {\n      movie: \"\",\n      customer: \"\",\n      dateOut: \"\",\n      dateReturned: \"\",\n      status: \"\",\n      rentalFee: \"\",\n    },\n    errors: {},\n  };\n\n  schema = {\n    id: Joi.number(),\n    movie: Joi.number().required,\n    customer: Joi.number().required,\n    dateOut: Joi.date().required,\n    dateReturned: Joi.date(),\n    status: Joi.string().required(),\n    rentalFee: Joi.number(),\n  };\n\n  componentDidMount() {\n    this.populateRentalForm();\n  }\n\n  populateRentalForm = async () => {\n    const rentalId = this.props.match.prarams.id;\n    if (rentalId === \"new\") return;\n    try {\n      const { data } = await getOneRental(rentalId);\n      this.setState({ data });\n      console.log(data);\n    } catch (ex) {\n      toast.error(ex.response.message);\n    }\n  };\n\n  doSubmit = async () => {\n    const data = this.state.data;\n    try {\n      await addRental(data);\n    } catch (ex) {\n      if (ex.response.status === 400) {\n        const { errors } = this.state;\n        errors.name = ex.response.message;\n      }\n    }\n    this.props.history.replace(\"/rentals\");\n  };\n\n  render() {\n    return <div>Rental Form</div>;\n  }\n}\n\nexport default RentalForm;\n"]},"metadata":{},"sourceType":"module"}